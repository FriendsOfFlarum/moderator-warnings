{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/moderator-warnings/webpack/bootstrap","webpack://@fof/moderator-warnings/webpack/runtime/compat get default export","webpack://@fof/moderator-warnings/webpack/runtime/define property getters","webpack://@fof/moderator-warnings/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/models/User']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/utils/UserControls']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/moderator-warnings/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/moderator-warnings/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/moderator-warnings/./src/forum/components/WarningModal.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/moderator-warnings/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/components/PostPreview']\"","webpack://@fof/moderator-warnings/./src/forum/components/WarningPost.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/moderator-warnings/./src/forum/components/WarningControls.js","webpack://@fof/moderator-warnings/./src/forum/components/WarningListItem.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/moderator-warnings/./src/forum/components/WarningList.js","webpack://@fof/moderator-warnings/./src/forum/components/WarningPage.js","webpack://@fof/moderator-warnings/./src/forum/addWarningPage.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/models/Post']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/moderator-warnings/./src/forum/components/WarningPreview.js","webpack://@fof/moderator-warnings/./src/forum/components/PostWarning.js","webpack://@fof/moderator-warnings/./src/forum/components/PostWarningList.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@fof/moderator-warnings/./src/forum/components/WarningNotification.js","webpack://@fof/moderator-warnings/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/moderator-warnings/./src/forum/model/Warning.js","webpack://@fof/moderator-warnings/./src/forum/index.js","webpack://@fof/moderator-warnings/./src/forum/addWarningControl.js","webpack://@fof/moderator-warnings/./src/forum/addWarningsToPosts.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/UserControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport username from 'flarum/common/helpers/username';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class WarningModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.publicComment = Stream('');\n    this.privateComment = Stream('');\n    this.strikes = Stream(0);\n  }\n\n  className() {\n    return 'WarningsModal Modal--large';\n  }\n\n  title() {\n    return app.translator.trans('fof-moderator-warnings.forum.warning_modal.heading', { username: username(this.attrs.user) });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans('fof-moderator-warnings.forum.warning_modal.strikes_heading')}\n                <input type=\"number\" className=\"FormControl\" bidi={this.strikes} min=\"0\" max=\"5\"></input>\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans('fof-moderator-warnings.forum.warning_modal.public_comment_heading', {\n                  username: username(this.attrs.user),\n                })}\n                <textarea className=\"FormControl\" bidi={this.publicComment} required={true} rows=\"6\" />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {app.translator.trans('fof-moderator-warnings.forum.warning_modal.private_comment_heading', {\n                  username: username(this.attrs.user),\n                })}\n                <textarea className=\"FormControl\" bidi={this.privateComment} rows=\"6\" />\n              </label>\n            </div>\n          </div>\n          <div className=\"Form-group\">\n            <Button className=\"Button Button--primary Button--block\" type=\"submit\" loading={this.loading}>\n              {app.translator.trans('fof-moderator-warnings.forum.warning_modal.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    app.alerts.dismiss(this.successAlert);\n\n    this.loading = true;\n\n    if (!this.strikes()) {\n      this.strikes(0);\n    }\n\n    const newWarning = {\n      userId: this.attrs.user.id(),\n      strikes: this.strikes(),\n      public_comment: this.publicComment(),\n      private_comment: this.privateComment(),\n    };\n\n    if (this.attrs.post) {\n      newWarning.post = this.attrs.post;\n    }\n\n    app.store\n      .createRecord('warnings')\n      .save(newWarning)\n      .then(this.hide.bind(this))\n      .then(\n        (this.successAlert = app.alerts.show(\n          { type: 'success' },\n          app.translator.trans('fof-moderator-warnings.forum.warning_modal.confirmation_message')\n        ))\n      )\n      .then(this.attrs.callback)\n      .catch(() => {});\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostPreview'];","import Component from 'flarum/common/Component';\nimport PostPreview from 'flarum/forum/components/PostPreview';\n\nexport default class WarningPost extends Component {\n  view() {\n    return (\n      <div className=\"WarningPost\">\n        <ul class=\"Dropdown-menu PostPreview-preview fade in\">\n          <li>{PostPreview.component({ post: this.attrs.post })}</li>\n        </ul>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.$('.PostPreview-preview').show().css('position', 'relative');\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import Button from 'flarum/common/components/Button';\nimport Separator from 'flarum/common/components/Separator';\nimport ItemList from 'flarum/common/utils/ItemList';\n\n/**\n * The `WarningControls` utility constructs a list of buttons for a warning which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a warning.\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @public\n   */\n  controls(warning, context) {\n    const items = new ItemList();\n\n    ['user', 'moderation', 'destructive'].forEach((section) => {\n      const controls = this[section + 'Controls'](warning, context).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + 'Separator', Separator.component());\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for a warning pertaining to the current user (e.g. report).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  userControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning pertaining to moderation (e.g. edit).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  moderationControls(warning, context) {\n    return new ItemList();\n  },\n\n  /**\n   * Get controls for a warning that are destructive (e.g. delete).\n   *\n   * @param {Warning} warning\n   * @param {*} context The parent component under which the controls menu will\n   *     be displayed.\n   * @return {ItemList}\n   * @protected\n   */\n  destructiveControls(warning, context) {\n    const items = new ItemList();\n    if (!warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        'hide',\n        <Button icon=\"far fa-trash-alt\" onclick={this.hideAction.bind(warning)}>\n          {app.translator.trans('fof-moderator-warnings.forum.warning_controls.delete_button')}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canManageWarnings()) {\n      items.add(\n        'restore',\n        <Button icon=\"fas fa-reply\" onclick={this.restoreAction.bind(warning)}>\n          {app.translator.trans('fof-moderator-warnings.forum.warning_controls.restore_button')}\n        </Button>\n      );\n    }\n    if (warning.isHidden() && app.session.user.canDeleteWarnings()) {\n      items.add(\n        'delete',\n        <Button icon=\"fas fa-times\" onclick={this.deleteAction.bind(warning)}>\n          {app.translator.trans('fof-moderator-warnings.forum.warning_controls.delete_forever_button')}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Hide a warning.\n   *\n   * @return {Promise}\n   */\n  hideAction() {\n    this.pushAttributes({ hiddenAt: new Date(), hiddenUser: app.session.user });\n\n    return this.save({ isHidden: true }).then(() => m.redraw());\n  },\n\n  /**\n   * Restore a warning.\n   *\n   * @return {Promise}\n   */\n  restoreAction() {\n    this.pushAttributes({ hiddenAt: null, hiddenUser: null });\n\n    return this.save({ isHidden: false }).then(() => m.redraw());\n  },\n\n  /**\n   * Delete a warning.\n   *\n   * @return {Promise}\n   */\n  deleteAction(context) {\n    if (context) context.loading = true;\n\n    return this.delete()\n      .then(() => {})\n      .catch(() => {})\n      .then(() => {\n        if (context) context.loading = false;\n        location.reload();\n      });\n  },\n};\n","import Component from 'flarum/common/Component';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Link from 'flarum/common/components/Link';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport classList from 'flarum/common/utils/classList';\nimport WarningPost from './WarningPost';\nimport WarningControls from './WarningControls';\n\nexport default class WarningListItem extends Component {\n  view() {\n    const { warning } = this.attrs;\n    const addedByUser = warning.addedByUser();\n    const controls = WarningControls.controls(warning, this).toArray();\n\n    return (\n      <div {...this.elementAttrs()}>\n        {controls.length\n          ? Dropdown.component(\n              {\n                icon: 'fas fa-ellipsis-v',\n                className: 'WarningListItem-controls',\n                buttonClassName: 'Button Button--icon Button--flat Slidable-underneath Slidable-underneath--right',\n              },\n              controls\n            )\n          : ''}\n        <div className=\"WarningListItem-main\">\n          <h3 className=\"WarningListItem-title\">\n            <Link href={addedByUser ? app.route.user(addedByUser) : '#'} className=\"WarningListItem-author\">\n              {avatar(addedByUser)} {username(addedByUser)}\n            </Link>\n          </h3>\n          <span class=\"WarningListItem-strikes\">\n            {warning.isHidden()\n              ? app.translator.trans('fof-moderator-warnings.forum.warning_list_item.list_item_heading_hidden', {\n                  time: humanTime(warning.createdAt()),\n                  strikes: warning.strikes() || 0,\n                })\n              : app.translator.trans('fof-moderator-warnings.forum.warning_list_item.list_item_heading', {\n                  time: humanTime(warning.createdAt()),\n                  strikes: warning.strikes() || 0,\n                })}\n          </span>\n          <hr />\n          <ul className=\"WarningListItem-info\">\n            {warning.post() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">{app.translator.trans('fof-moderator-warnings.forum.warning_list_item.linked_post')}</h3>\n                {WarningPost.component({ post: warning.post() })}\n              </li>\n            ) : (\n              ''\n            )}\n            <li className=\"item-excerpt\">\n              <h3 className=\"WarningListItem-subtitle\">{app.translator.trans('fof-moderator-warnings.forum.warning_list_item.public_comment')}</h3>\n              <p class=\"WarningListItem-comment\">{m.trust(warning.public_comment())}</p>\n            </li>\n            {app.session.user.canManageWarnings() && warning.private_comment() ? (\n              <li className=\"item-excerpt\">\n                <h3 className=\"WarningListItem-subtitle\">{app.translator.trans('fof-moderator-warnings.forum.warning_list_item.private_comment')}</h3>\n                <p class=\"WarningListItem-comment\">{m.trust(warning.private_comment())}</p>\n              </li>\n            ) : (\n              ''\n            )}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  elementAttrs() {\n    const { warning } = this.attrs;\n    const attrs = {};\n\n    attrs.className =\n      (attrs.className || '') +\n      ' ' +\n      classList({\n        WarningListItem: true,\n        'WarningListItem--hidden': warning.isHidden(),\n      });\n\n    return attrs;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport WarningListItem from './WarningListItem';\nimport Button from 'flarum/common/components/Button';\nimport WarningModal from './WarningModal';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport default class WarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loading = true;\n    this.warnings = [];\n    this.user = this.attrs.params.user;\n    this.refresh();\n  }\n\n  view() {\n    let loading;\n\n    if (this.loading) {\n      loading = LoadingIndicator.component({ size: 'large' });\n    }\n\n    return (\n      <div className=\"WarningList\">\n        <h1 className=\"WarningList-warnings\">\n          {this.strikeCount()\n            ? app.translator.trans('fof-moderator-warnings.forum.warning_list.warnings', { strikes: this.strikeCount() || 0 })\n            : app.translator.trans('fof-moderator-warnings.forum.warning_list.warnings_no_strikes')}\n        </h1>\n        <div class=\"Warnings-toolbar\">\n          <ul className=\"Warnings-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n        </div>\n        <ul className=\"WarningList-Warnings\">\n          {this.warnings.map((warning) => {\n            return (\n              <li key={warning.id()} data-id={warning.id()}>\n                {WarningListItem.component({ warning })}\n              </li>\n            );\n          })}\n          {!this.loading && this.warnings.length === 0 && (\n            <label>{app.translator.trans('fof-moderator-warnings.forum.warning_list.no_warnings')}</label>\n          )}\n        </ul>\n        <div className=\"WarningList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n\n  actionItems() {\n    const items = new ItemList();\n\n    if (app.session.user.canManageWarnings()) {\n      items.add(\n        'create_warning',\n        <Button className=\"Button Button--primary\" onclick={this.handleOnClickCreate.bind(this)}>\n          {app.translator.trans('fof-moderator-warnings.forum.warning_list.add_button')}\n        </Button>\n      );\n    }\n\n    return items;\n  }\n\n  strikeCount() {\n    return this.warnings\n      .filter((warning) => !warning.isHidden())\n      .map((warning) => warning.strikes())\n      .reduce((a, b) => a + b, 0);\n  }\n\n  parseResults(results) {\n    [].push.apply(this.warnings, results);\n    this.loading = false;\n    m.redraw();\n\n    return results;\n  }\n\n  refresh() {\n    return app.store\n      .find('warnings', this.user.id())\n      .catch(() => {})\n      .then((results) => {\n        this.warnings = [];\n        this.parseResults(results);\n      });\n  }\n\n  handleOnClickCreate(e) {\n    e.preventDefault();\n    app.modal.show(WarningModal, {\n      callback: this.refresh.bind(this),\n      ...this.attrs.params,\n    });\n  }\n}\n","import UserPage from 'flarum/forum/components/UserPage';\nimport WarningList from './WarningList';\n\nexport default class WarningPage extends UserPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loadUser(m.route.param('username'));\n  }\n\n  content() {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() || (this.user.id() === app.session.user.id() && this.user.visibleWarningCount() > 0))\n    ) {\n      return (\n        <div className=\"WarningsUserPage\">\n          {WarningList.component({\n            params: {\n              user: this.user,\n              sort: 'newest',\n            },\n          })}\n        </div>\n      );\n    }\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport WarningPage from './components/WarningPage';\n\nexport default function () {\n  app.routes['user.warnings'] = {\n    path: '/u/:username/warnings',\n    component: WarningPage,\n  };\n\n  extend(UserPage.prototype, 'navItems', function (items) {\n    if (\n      app.session.user &&\n      (app.session.user.canViewWarnings() || (this.user.id() === app.session.user.id() && this.user.visibleWarningCount() > 0))\n    ) {\n      items.add(\n        'warnings',\n        LinkButton.component(\n          {\n            href: app.route('user.warnings', {\n              username: this.user.slug(),\n            }),\n            icon: 'fas fa-exclamation-circle',\n          },\n          [\n            app.translator.trans('fof-moderator-warnings.forum.user.warnings'),\n            this.user.visibleWarningCount() > 0 ? <span className=\"Button-badge\">{this.user.visibleWarningCount()}</span> : '',\n          ]\n        ),\n        10\n      );\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport WarningListItem from './WarningListItem';\n\nexport default class WarningPreview extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <Link\n        className=\"WarningPreview\"\n        href={app.route('user.warnings', {\n          username: this.warning.warnedUser().username(),\n        })}\n      >\n        <WarningListItem warning={this.warning}></WarningListItem>\n      </Link>\n    );\n  }\n}\n","import Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\nimport username from 'flarum/common/helpers/username';\nimport WarningPreview from './WarningPreview';\n\nexport default class PostWarning extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.warning = this.attrs.warning;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning\">\n        <span className=\"Post-warning-summary\">\n          {icon('fas fa-exclamation-circle')}\n          {this.warning.strikes()\n            ? app.translator.trans('fof-moderator-warnings.forum.post.warning', {\n                strikes: this.warning.strikes() || 0,\n                mod_username: username(this.warning.addedByUser()),\n              })\n            : app.translator.trans('fof-moderator-warnings.forum.post.warning_no_strikes', {\n                mod_username: username(this.warning.addedByUser()),\n              })}\n        </span>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const warning = this.warning;\n\n    let timeout;\n\n    const hidePreview = () => {\n      this.$('.Post-warning-preview')\n        .removeClass('in')\n        .one('transitionend', function () {\n          $(this).hide();\n        });\n    };\n\n    const $preview = $('<ul class=\"Dropdown-menu Post-warning-preview fade\"/>');\n    this.$().append($preview);\n\n    this.$()\n      .children()\n      .hover(\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(function () {\n            if (!$preview.hasClass('in') && $preview.is(':visible')) return;\n\n            // When the user hovers their mouse over the list of people who have\n            // replied to the post, render a list of reply previews into a\n            // popup.\n            m.render($preview[0], <li data-id={warning.id()}>{WarningPreview.component({ warning })}</li>);\n            $preview.show();\n            setTimeout(() => $preview.off('transitionend').addClass('in'));\n          }, 200);\n        },\n        function () {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        }\n      );\n\n    // Whenever the user hovers their mouse over a particular name in the\n    // list of repliers, highlight the corresponding post in the preview\n    // popup.\n    $('.Post-warning')\n      .find('.Post-warning-summary a')\n      .hover(\n        function () {\n          $('.Post-warning')\n            .find('[data-number=\"' + $(this).data('number') + '\"]')\n            .addClass('active');\n        },\n        function () {\n          $('.Post-warning').find('[data-number]').removeClass('active');\n        }\n      );\n  }\n}\n","import Component from 'flarum/common/Component';\nimport PostWarning from './PostWarning';\nimport WarningPreview from './WarningPreview';\n\nexport default class PostWarningList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.post = this.attrs.post;\n  }\n\n  view() {\n    return (\n      <div className=\"Post-warning-list\">\n        {this.attrs.post.warnings().map((warning) => {\n          return PostWarning.component({ warning });\n        })}\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import Notification from 'flarum/forum/components/Notification';\nimport username from 'flarum/common/helpers/username';\n\nexport default class WarningNotification extends Notification {\n  icon() {\n    return 'fas fa-exclamation-circle';\n  }\n\n  href() {\n    return app.route('user.warnings', {\n      username: app.session.user.username(),\n    });\n  }\n\n  content() {\n    const warning = this.attrs.notification.subject();\n\n    if (warning.strikes()) {\n      return app.translator.trans('fof-moderator-warnings.forum.notifications.warning_text', {\n        mod_username: username(this.attrs.notification.fromUser()),\n        strikes: warning.strikes() || 0,\n      });\n    } else {\n      return app.translator.trans('fof-moderator-warnings.forum.notifications.warning_no_strikes_text', {\n        mod_username: username(this.attrs.notification.fromUser()),\n      });\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","import Model from 'flarum/common/Model';\nimport computed from 'flarum/common/utils/computed';\n\nexport default class Warnings extends Model {}\nObject.assign(Warnings.prototype, {\n  id: Model.attribute('id'),\n  public_comment: Model.attribute('public_comment'),\n  private_comment: Model.attribute('private_comment'),\n  strikes: Model.attribute('strikes'),\n\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  isHidden: computed('hiddenAt', (hiddenAt) => !!hiddenAt),\n  hiddenAt: Model.attribute('hiddenAt', Model.transformDate),\n\n  warnedUser: Model.hasOne('warnedUser'),\n  hiddenByUser: Model.hasOne('hiddenByUser'),\n  addedByUser: Model.hasOne('addedByUser'),\n\n  post: Model.hasOne('post'),\n});\n","import app from 'flarum/forum/app';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\nimport { extend } from 'flarum/common/extend';\nimport User from 'flarum/common/models/User';\nimport Model from 'flarum/common/Model';\nimport addWarningControl from './addWarningControl';\nimport addWarningPage from './addWarningPage';\nimport addWarningsToPosts from './addWarningsToPosts';\nimport WarningNotification from './components/WarningNotification';\nimport Warning from './model/Warning';\n\napp.initializers.add('fof-moderator-warnings', (app) => {\n  app.store.models.warnings = Warning;\n  User.prototype.canViewWarnings = Model.attribute('canViewWarnings');\n  User.prototype.canManageWarnings = Model.attribute('canManageWarnings');\n  User.prototype.canDeleteWarnings = Model.attribute('canDeleteWarnings');\n  User.prototype.visibleWarningCount = Model.attribute('visibleWarningCount');\n  addWarningControl();\n  addWarningPage();\n  addWarningsToPosts();\n\n  app.notificationComponents.warning = WarningNotification;\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('warning', {\n      name: 'warning',\n      icon: 'fas fa-exclamation-circle',\n      label: app.translator.trans('fof-moderator-warnings.forum.settings.warning_notification_label'),\n    });\n  });\n});\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\n\nimport WarningModal from './components/WarningModal';\n\nexport default function () {\n  extend(PostControls, 'moderationControls', function (items, post) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      'warning',\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: post.user(),\n            post: post,\n          })\n        }\n      >\n        {app.translator.trans('fof-moderator-warnings.forum.post_controls.warning_button')}\n      </Button>\n    );\n  });\n\n  extend(UserControls, 'moderationControls', function (items, user) {\n    if (!app.session.user || !app.session.user.canManageWarnings()) return;\n\n    items.add(\n      'warning',\n      <Button\n        icon=\"fas fa-exclamation-circle\"\n        onclick={() =>\n          app.modal.show(WarningModal, {\n            callback: () => {\n              location.reload();\n            },\n            user: user,\n          })\n        }\n      >\n        {app.translator.trans('fof-moderator-warnings.forum.post_controls.warning_button')}\n      </Button>\n    );\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport Model from 'flarum/common/Model';\nimport Post from 'flarum/common/models/Post';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PostWarningList from './components/PostWarningList';\n\nexport default function addWarningsToPosts() {\n  Post.prototype.warnings = Model.hasMany('warnings');\n\n  extend(CommentPost.prototype, 'footerItems', function (items) {\n    const post = this.attrs.post;\n    const warnings = post.warnings();\n\n    if (!warnings) return;\n    items.add(\n      `warnings`,\n      PostWarningList.component({\n        post: post,\n      })\n    );\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","WarningModal","_Modal","apply","arguments","_proto","oninit","vnode","this","publicComment","Stream","privateComment","strikes","className","title","app","translator","trans","username","attrs","user","content","m","type","bidi","min","max","required","rows","Button","loading","onsubmit","preventDefault","alerts","dismiss","successAlert","newWarning","userId","id","public_comment","private_comment","post","store","createRecord","save","then","hide","show","callback","Modal","_extends","assign","n","length","r","WarningPost","_Component","view","class","PostPreview","oncreate","$","css","Component","controls","warning","context","_this","items","ItemList","forEach","section","toArray","item","add","itemName","Separator","userControls","moderationControls","destructiveControls","isHidden","session","canManageWarnings","icon","onclick","hideAction","restoreAction","canDeleteWarnings","deleteAction","pushAttributes","hiddenAt","Date","hiddenUser","redraw","location","reload","WarningListItem","addedByUser","WarningControls","elementAttrs","Dropdown","buttonClassName","Link","href","route","avatar","time","humanTime","createdAt","component","trust","classList","WarningList","warnings","params","refresh","LoadingIndicator","size","strikeCount","listItems","actionItems","map","handleOnClickCreate","filter","reduce","b","parseResults","results","push","find","WarningPage","_UserPage","loadUser","param","canViewWarnings","visibleWarningCount","sort","UserPage","routes","path","extend","LinkButton","slug","WarningPreview","warnedUser","PostWarning","mod_username","timeout","hidePreview","removeClass","one","$preview","append","children","hover","clearTimeout","setTimeout","hasClass","is","render","off","addClass","data","PostWarningList","WarningNotification","_Notification","notification","subject","fromUser","Notification","Warnings","_Model","Model","computed","hiddenByUser","models","Warning","User","PostControls","UserControls","addWarningPage","Post","CommentPost","notificationComponents","NotificationGrid","name","label"],"ignoreList":[],"sourceRoot":""}